<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <f:view locale="#{internazionalizacionBean.localidad}">
        <h:head>
            <title>.:Mouth System | Promociones:.</title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <!--css-->  
            <h:outputStylesheet library="css" name="dashboard.css" />
            <h:outputStylesheet library="css" name="bootstrap.css" />
            <h:outputStylesheet library="css" name="bootstrap-grid.css" />
            <h:outputStylesheet library="css" name="bootstrap-reboot.css" />
            <h:outputStylesheet library="css" name="all.css" />
            <h:outputStylesheet library="css" name="preloader.css" />

            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css"/>
            <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css"/>


        </h:head>
        <h:body>

            <div class="contenedor_loader">
                <div class="loader">

                </div>
            </div>
            
             <h:panelGroup id="msmSend">
                            <c:if test="#{promocionesControllers.msm.equalsIgnoreCase('promoOk')}" >

                                <div class="alert alert-success mt-3" role="alert" id="success-alert">
                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                    <strong>La Promocion </strong>fue  Registrada Exitosamente!!! 
                                </div>

                            </c:if>


                            <c:if test="#{promocionesControllers.msm.equalsIgnoreCase('promoBad')}" >

                                <div class="alert alert-warning mt-3" role="alert" id="success-alert">
                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                    <strong>La Promocion </strong>NO fue  Registrada!!! 
                                </div>

                            </c:if>



                            <c:if test="#{promocionesControllers.msm.equalsIgnoreCase('promoFail')}" >

                                <div class="alert alert-danger mt-3" role="alert" id="success-alert">
                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                    <strong>Alerta!!</strong> fail en el query! 
                                </div>

                            </c:if>

                        </h:panelGroup>



            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2"><i class="fas fa-star-half"></i> #{txt['ms.fidelizacion']}</h1>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group mr-2">

                    </div>


                </div>
            </div>


            <div class="container">
                <div class="row">

                    <div class="col-md-4 col-sm-12">
                        <div class="card shadow">
                            <div class="card-body">
                                <h:commandButton class="btn btn-info btn-block" value="Crear Promocion" pt:data-toggle="modal" pt:data-target="#staticBackdrop">
                                    <f:ajax render="modalPromo" event="click"></f:ajax>
                                </h:commandButton>
                            </div>
                        </div>
                    </div>    
                    <div class="col-md-8 col-sm-12">

                        <div class="card shadow">
                            <div class="card-body">
                                <table cellspacing="0" class="table table-responsive-sm table-sm table-striped table-responsive-sm align-middle   display nowrap   " id="listaUsuarios" style="font-size: 0.9em;">
                                    <thead class="text-center text-capitalize">
                                        <th># </th>
                                        <th> Fecha</th>
                                        <th> Promocion</th>
                                        <th class=""><i class="fa fa fa-cogs"></i></th>
                                    </thead>
                                    <tbody>


                                    </tbody>

                                </table>
                            </div>


                        </div>



                    </div>    

                </div>
            </div>










            <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <h:panelGroup id="modalPromo">

                       





                        <div class="modal-content">


                            <div class="float-right">
                                <button type="button" class="float-right m-1 btn btn-outline-secondary btn-sm" data-dismiss="modal"><i class="fa fa-window-close"></i></button>
                            </div>
                            <div class="modal-body col-md-12 mx-auto mb-5 text-center">
                                <span class="mb-4 text-center text-capitalize text-uppercase">Nueva Promocion</span>
                                <div class="mt-2">

                                    <h:form id="promo">

                                        <h:inputText  pt:type="text"  class="form-control mb-1" id="titulo" value="#{promocionesControllers.titulo}" required="true" />
                                        <h:inputText  pt:type="date"  class="form-control mb-1"  id="fecha_inicio" value="#{promocionesControllers.fecha_i}" />
                                        <h:inputText  pt:type="date"   class="form-control mb-1"  id="fecha_fin" value="#{promocionesControllers.fecha_f}" />
                                        <h:inputTextarea    class="form-control mb-3 "  value="#{promocionesControllers.des}" rows="7" cols="3" />

                                        <h:commandButton value="Guardar" class="btn btn-outline-secondary btn-sm btn-block"  action="#{promocionesControllers.crear()}" >
                                            <!--<f:ajax render="msmSend" event="click" execute="@form:promo"  listener="#{promocionesControllers.crear()}"></f:ajax>-->
                                        </h:commandButton>

                                    </h:form>



                                </div>

                            </div>

                        </div>
                    </h:panelGroup>
                </div>
            </div>




            <!--js--> 
            <h:outputScript library="js" name="jquery-1.7.js"/> 
            <h:outputScript library="js" name="all.min.js"/> 
            <h:outputScript library="js" name="bootstrap.js"/> 
            <h:outputScript library="js" name="loader.js"/> 



            <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>

            <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>

            <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
            <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>


            <script type="text/javascript">






                $(document).ready(function () {


                    $('#listaUsuarios').DataTable({

                        language: {
                            processing: "Traitement en cours...",
                            search: "Buscar:",
                            lengthMenu: "mostrar _MENU_ elementos",
                            info: "Mostrando  _START_ a _END_ de _TOTAL_ entradas.",
                            infoEmpty: "Visualizaci√≥n de elementos 0 a 0 de 0 elementos",
                            infoFiltered: "(filtrado de _MAX_ registros en total)",
                            infoPostFix: "",
                            loadingRecords: "Cargando...",
                            zeroRecords: "No se encontro coincidencias",
                            emptyTable: "No hay datos disponibles en la tabla.",
                            paginate: {
                                first: "Primero",
                                previous: "anterior",
                                next: "proximo",
                                last: "Ultimo",
                                pagingType: "full_numbers"
                            },
                            aria: {
                                sortAscending: ": activar para ordenar la columna en orden ascendente",
                                sortDescending: ": activar para ordenar la columna en orden descendente"
                            }


                        },

                        responsive: 'true',
                        dom: 'Bfrtip',
                        buttons: [
                            {
                                extend: 'pdf',
                                text: '<i class="fa fa-file-pdf"></i>',
                                className: 'btn btn-danger'
                            },
                            {
                                extend: 'excel',
                                text: '<i class="fa fa-file-excel"></i> ',
                                className: 'btn btn-success'
                            },
                            {
                                extend: 'print',
                                text: '<i class="fa fa-print"></i> ',
                                className: 'btn btn-info'
                            }
                        ],
                    });
                    new $.fn.dataTable.Buttons(table, {
                        buttons: [
                            'copy', 'excel', 'pdf'
                        ]
                    });
                });
            </script>


        </h:body>
    </f:view>
</html>




